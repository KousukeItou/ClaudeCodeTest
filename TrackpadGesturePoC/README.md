# TrackpadGesturePoC - Trackpad Gesture Popup

macOS向けマルチタッチジェスチャ検出の概念実証アプリケーション

## 概要

このアプリケーションは、macOSのトラックパッドで行われるマルチタッチジェスチャ（3〜5本指）を検出し、ジェスチャの種類を画面中央にポップアップ表示する概念実証（PoC）です。

## 機能

- **メニューバー常駐**: Dockに表示されず、メニューバーにアイコンで常駐
- **マルチタッチジェスチャ検出**:
  - スワイプ（3〜5本指、上下左右）
  - ピンチ（イン/アウト、3〜5本指）
  - 回転（時計/反時計回り、3〜5本指）
  - タップ（3〜5本指）
- **リアルタイムポップアップ表示**: ジェスチャ検出後60ms以内に表示
- **デバッグログ機能**: メニューから切り替え可能

## 必要要件

- macOS 15.5以降
- Apple Silicon (M1/M2/M3)
- 内蔵トラックパッドまたはMagic Trackpad 2

## ビルド手順

### Swift Package Manager

```bash
cd TrackpadGesturePoC
swift build -c release
```

### Xcode

1. `Package.swift`をXcodeで開く
2. Product > Archive
3. Distribute App > Copy App

## インストール

1. アプリケーションフォルダに`.app`ファイルをコピー
2. 初回起動時にGatkeeperの警告が表示される場合:
   - システム設定 > プライバシーとセキュリティ
   - 「このまま開く」をクリック

## 使用方法

1. アプリケーションを起動
2. メニューバーに手のアイコンが表示される
3. トラックパッドで3〜5本指のジェスチャを実行
4. 画面中央にジェスチャ名がポップアップ表示される

### メニュー項目

- **About**: アプリケーション情報
- **Toggle Debug Log**: デバッグログの有効/無効切り替え
- **Quit**: アプリケーション終了

## トラブルシューティング

### ジェスチャが検出されない場合

1. システム設定でトラックパッドジェスチャが有効になっているか確認
2. 他のアプリケーションがジェスチャを消費していないか確認
3. デバッグログを有効にしてコンソールアプリでログを確認

### パフォーマンス問題

- CPU使用率が1%を超える場合、他の高負荷アプリケーションとの競合を確認
- メモリ使用量が40MBを超える場合、アプリケーションを再起動

## 技術仕様

- **言語**: Swift 5.10
- **フレームワーク**: AppKit, MultitouchSupport.framework
- **アーキテクチャ**: Apple Silicon専用
- **レイテンシ目標**: タッチ終了→ポップアップ表示 ≤ 60ms
- **リソース使用量**: CPU < 1%, メモリ < 40MB

## 注意事項

- このアプリケーションは非公開のMultitouchSupport.frameworkを使用しています
- macOSのアップデートにより動作が変更される可能性があります
- 商用利用は推奨されません（概念実証目的）

## ライセンス

このソフトウェアは概念実証目的で作成されており、個人利用のみを想定しています。

## バージョン履歴

- v1.0 (2025-06-07): 初期リリース
  - 基本的なジェスチャ検出機能
  - メニューバー常駐UI
  - ポップアップ表示機能
  - デバッグログ機能